function executeSend(n,t,i,r){try{history.replaceState(null,"",i)}catch(u){}n.send();n.onreadystatechange=function(){n.readyState===4&&(n.status===200?(document.getElementById("userslist").innerHTML=n.responseText,r()):t())}}function FindUsersNear(n,t){var e=new XMLHttpRequest,u=document.getElementById("lat").value,f=document.getElementById("lon").value,r=document.getElementById("search").value,o=u+f+r,i;if(o===lastForm||r.length===0){t();return}lastForm=o;n();e.open("GET","/api/UsersNearMe?lat="+u+"&lon="+f+"&search="+r,!0);i=document.getElementById("erfld");executeSend(e,function(){i.textContent="Ooops, seems like automatic search failed. Check your internet-connection and click the button to search manually.";i.style.display="";document.getElementById("subbutton").className=""},"/User/NearMeGeo?lat="+u+"&lon="+f+"&search="+r,function(){i.textContent="";i.style.display="none";t()})}function DoAutoSearch(n,t){if(geoIsUnavailable){FindUsersNear(n,function(){t()});return}spiceGeo.GetGeoLocIntoFields(function(){FindUsersNear(n,function(){t()})},function(){geoIsUnavailable=!0;FindUsersNear(n,function(){t()})})}var spiceGeo,lastForm,geoIsUnavailable,autoSearch;Date.now||(Date.now=function(){return(new Date).getTime()});spiceGeo=function(){function n(n){return document.getElementById(n)}function f(){for(var t=document.querySelectorAll(".posfallback"),n=0;n<t.length;++n)t[n].className=""}function e(t,e){function l(){o.style.display="none";o.textContent="";clearInterval(c)}var s;if(i!==null&&r!==null&&u!==null&&(Date.now()-u)/1e3<120){n("lat").value=i;n("lon").value=r;s=n("locationaction");s!==null&&(s.style.display="");t();return}var h=!1,c=null,o=n("geowait");setTimeout(function(){h||(o.style.display="",o.textContent="Finding your location. Remember to accept if your device asks for permision to share your location.",c=setInterval(function(){o.textContent=o.textContent+"."},350))},300);navigator.geolocation.getCurrentPosition(function(f){h=!0;l();n("lat").value=f.coords.latitude;n("lon").value=f.coords.longitude;var e=n("locationaction");e!==null&&(e.style.display="");t();i=f.coords.latitude;r=f.coords.longitude;u=Date.now()},function(){l();n("geoerror").style.display="";f();e!==undefined&&e()},{enableHighAccuracy:!1,timeout:5e3,maximumAge:Infinity})}var t;"geolocation"in navigator?(t=n("jslocation"),t!==null&&t!==undefined&&(t.className="")):f();var i=null,r=null,u=null;return{GetGeoLocIntoFields:e}}(),function(){var t=["green pepper","green chili","pepper","cinnamon","rosemary","curry"],n=0;setInterval(function(){var i=t[n];n+=1;n>=t.length&&(n=0);document.getElementById("search").setAttribute("placeholder",i)},2e3)}();lastForm="";document.addEventListener?document.getElementById("find").addEventListener("click",function(n){FindUsersByZip();n.preventDefault()}):document.getElementById("subbutton").className="";geoIsUnavailable=!1;Date.now||(Date.now=function(){return(new Date).getTime()});autoSearch=function(){function u(){var n="";return[].forEach.call(r,function(t){n+=t.value!==null?t.value:t.innerText}),n}function i(n){var t=document.getElementById("searchpr"),i="none";n&&(i="");t!==null&&(t.style.display=i)}function s(){n=!1;t=!0;var r=setTimeout(function(){t=!1;i()},1e4);DoAutoSearch(function(){i(!0)},function(){t=!1;clearTimeout(r);setTimeout(function(){i()},200)})}function o(t){e=Date.now();n=!0;var r=t.target,i=document.getElementById(r.id+"_sh");i!==null&&(i.textContent="")}function h(n){try{var t=document.getElementById(n.dataset.help);t.className=""}catch(i){}}function c(n){try{var t=document.getElementById(n.dataset.help);t.className="hd"}catch(i){}}var r=document.querySelectorAll("input,textarea"),f=u(),e=Date.now(),n=!1,t=!1;document.querySelector("form").addEventListener("change",function(n){o(n)});document.querySelector("form").addEventListener("keyup",function(n){o(n)});setInterval(function(){var t=u();t!==f&&(n=!0,f=t)},1e3);setInterval(function(){n&&!t&&Date.now()-e>750&&s()},500);try{[].forEach.call(r,function(n){n.addEventListener("blur",function(n){c(n.target)});n.addEventListener("focus",function(n){h(n.target)})})}catch(l){}return{}}(),function(){setTimeout(function(){var n=new XMLHttpRequest;n.open("GET","/api/prune?v="+Math.random());n.send(null);n.onreadystatechange=function(){var r,t,i;n.readyState===4&&n.status===200&&(r=document.getElementById("resetinfo"),r.innerHTML=n.responseText,t=document.createElement("script"),t.type="text/javascript",t.async=!0,t.src="/jsmin/lazy.min.js",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(t,i))}},1)}();jsfl=!0;